name: MBSim-Env Build
on:
  push:
  schedule:
    - cron: '36 23 * * *'
jobs:
#mfmf  build_basic:
#mfmf    name: Build & Basic Examples
#mfmf    uses: ./.github/workflows/mbsim-env-matrixbuild.yml
#mfmf    with:
#mfmf      matrixInput: ''
#mfmf      uploadArtifactInput: false
#mfmf    secrets:
#mfmf      githubStatusAccessToken: ${{secrets.githubStatusAccessToken}}
#mfmf      djangoSecretKey: ${{secrets.djangoSecretKey}}
#mfmf      postgresPassword: ${{secrets.postgresPassword}}
#mfmf      filestoragePassword: ${{secrets.filestoragePassword}}
#mfmf      codecovUploadToken_fmatvec: ${{secrets.codecovUploadToken_fmatvec}}
#mfmf      codecovUploadToken_hdf5serie: ${{secrets.codecovUploadToken_hdf5serie}}
#mfmf      codecovUploadToken_openmbv: ${{secrets.codecovUploadToken_openmbv}}
#mfmf      codecovUploadToken_mbsim: ${{secrets.codecovUploadToken_mbsim}}
#mfmf  build:
#mfmf    name: Build
#mfmf    uses: ./.github/workflows/mbsim-env-matrixbuild.yml
#mfmf    #mfmf if: github.event_name=='schedule'
#mfmf    if: true #mfmf
#mfmf    with:
#mfmf      matrixInput: |
#mfmf        {"data":
#mfmf          [{
#mfmf            "branches": 
#mfmf              {"fmatvecBranch": "master", "hdf5serieBranch": "master", "openmbvBranch": "master", "mbsimBranch": "master"},
#mfmf            "os":
#mfmf              {"buildType": "linux64-dailydebug", "image": "mbsimenv/build",  "args": "--disableRunExamples"},
#mfmf          }]
#mfmf        }
#mfmf      uploadArtifactInput: true
#mfmf    secrets:
#mfmf      githubStatusAccessToken: ${{secrets.githubStatusAccessToken}}
#mfmf      djangoSecretKey: ${{secrets.djangoSecretKey}}
#mfmf      postgresPassword: ${{secrets.postgresPassword}}
#mfmf      filestoragePassword: ${{secrets.filestoragePassword}}
#mfmf      codecovUploadToken_fmatvec: ${{secrets.codecovUploadToken_fmatvec}}
#mfmf      codecovUploadToken_hdf5serie: ${{secrets.codecovUploadToken_hdf5serie}}
#mfmf      codecovUploadToken_openmbv: ${{secrets.codecovUploadToken_openmbv}}
#mfmf      codecovUploadToken_mbsim: ${{secrets.codecovUploadToken_mbsim}}
  dummy:
    name: "dumm examples"
    runs-on: ubuntu-latest
    steps:
      - run: mkdir -p ${{github.workspace}}/mbsim-env/local/include ${{github.workspace}}/mbsim-env/local/bin
      - run: echo aa > ${{github.workspace}}/mbsim-env/local/aa.txt
      - run: echo bb > ${{github.workspace}}/mbsim-env/local/include/bb.txt
      - run: echo cc > ${{github.workspace}}/mbsim-env/local/bin/cc.txt
      - name: "Archive artifact .../mbsim-env/local/ for upload"
        run: tar -czf ${{github.workspace}}/mbsim-env/local.tar.gz -C ${{github.workspace}}/mbsim-env/ local/
      - name: "Upload artifact archive .../mbsim-env/local/"
        uses: actions/upload-artifact@v3
        with:
          name: mbsim-env-local
          path: ${{github.workspace}}/mbsim-env/local.tar.gz
      - name: "Download artifact archive .../mbsim-env/local/"
        uses: actions/download-artifact@v3
        with:
          name: mbsim-env-local
          path: ${{github.workspace}}
      - name: "Unarchive artifact .../mbsim-env/local/"
        run: >
          mkdir -p ${{github.workspace}}/mbsim-env/ &&
          tar -xzf ${{github.workspace}}/local.tar.gz -C ${{github.workspace}}/mbsim-env/
      - run: ls -R ${{github.workspace}}/mbsim-env/local/
#mfmf  examplesPre:
#mfmf    name: "Pre examples"
#mfmf    runs-on: ubuntu-latest
#mfmf    needs: build
#mfmf    steps:
#mfmf      - run: echo Pre examples
#mfmf  examplesRun:
#mfmf    name: "Run examples"
#mfmf    runs-on: ubuntu-latest
#mfmf    needs: examplesPre
#mfmf    strategy:
#mfmf      fail-fast: false
#mfmf      matrix:
#mfmf        index: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] # at most 10 jobs can run in parallel
#mfmf    steps:
#mfmf      - run: echo Run examples ${{matrix.index}}/10
#mfmf  examplesPos:
#mfmf    name: "Post examples"
#mfmf    runs-on: ubuntu-latest
#mfmf    needs: examplesRun
#mfmf    steps:
#mfmf      - run: echo Post examples
