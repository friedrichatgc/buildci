name: CI (Repo-Dispatch)
on:
  push:
  workflow_dispatch:
    inputs:
      repo:
        description: "Triggered repo"
        required: true
        default: "mbsim"
        type: choice
        options:
        - fmatvec
        - hdf5serie
        - openmbv
        - mbsim
      branch:
        description: "Triggered branch in repo"
        required: true
        default: "master"
        type: string
      sha:
        description: "Triggered sha in repo"
        required: true
        default: ""
        type: string
jobs:
  getBuildMatrix:
    name: Get build matrix
    uses: ./.github/workflows/mbsim-env-getbuildmatrix.yml
    with:
      dailyRun: false
      pushSource: ${{ (github.event_name == 'workflow_dispatch' && '{"repository" "mbsim", "ref_name" "master", "sha" "123"}') || 'a' }}
