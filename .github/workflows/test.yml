name: Test
on:
  push:
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: "Maximize disk space (remove unwanted pre-installed software)"
        run: |
          BEFORE=$(df --output=used / | tail -n 1)
          echo "Remove .NET (~1GB/~1sec)" && sudo rm -rf /usr/share/dotnet
          #echo "Remove Android (~12GB/66sec)" && sudo rm -rf /usr/local/lib/android
          #echo "Remove CodeQL (~8GB/0sec)" && sudo rm -rf /opt/hostedtoolcache/CodeQL
          #echo "Remove Docker images (~4GB/12sec)" && sudo docker image prune --all --force
          AFTER=$(df --output=used / | tail -n 1)
          echo "$[($BEFORE-$AFTER)/1000000]GB freed"
      - name: "Maximize disk space (remove unwanted pre-installed software)"
        run: |
          BEFORE=$(df --output=used / | tail -n 1)
          #echo "Remove .NET (~1GB/~1sec)" && sudo rm -rf /usr/share/dotnet
          echo "Remove Android (~12GB/66sec)" && sudo rm -rf /usr/local/lib/android
          #echo "Remove CodeQL (~8GB/0sec)" && sudo rm -rf /opt/hostedtoolcache/CodeQL
          #echo "Remove Docker images (~4GB/12sec)" && sudo docker image prune --all --force
          AFTER=$(df --output=used / | tail -n 1)
          echo "$[($BEFORE-$AFTER)/1000000]GB freed"
      - name: "Maximize disk space (remove unwanted pre-installed software)"
        run: |
          BEFORE=$(df --output=used / | tail -n 1)
          #echo "Remove .NET (~1GB/~1sec)" && sudo rm -rf /usr/share/dotnet
          #echo "Remove Android (~12GB/66sec)" && sudo rm -rf /usr/local/lib/android
          echo "Remove CodeQL (~8GB/0sec)" && sudo rm -rf /opt/hostedtoolcache/CodeQL
          #echo "Remove Docker images (~4GB/12sec)" && sudo docker image prune --all --force
          AFTER=$(df --output=used / | tail -n 1)
          echo "$[($BEFORE-$AFTER)/1000000]GB freed"
      - name: "Maximize disk space (remove unwanted pre-installed software)"
        run: |
          BEFORE=$(df --output=used / | tail -n 1)
          #echo "Remove .NET (~1GB/~1sec)" && sudo rm -rf /usr/share/dotnet
          #echo "Remove Android (~12GB/66sec)" && sudo rm -rf /usr/local/lib/android
          #echo "Remove CodeQL (~8GB/0sec)" && sudo rm -rf /opt/hostedtoolcache/CodeQL
          echo "Remove Docker images (~4GB/12sec)" && sudo docker image prune --all --force
          AFTER=$(df --output=used / | tail -n 1)
          echo "$[($BEFORE-$AFTER)/1000000]GB freed"
      - name: "Maximize disk space (remove unwanted pre-installed software)"
        run: |
          BEFORE=$(df --output=used / | tail -n 1)
          #echo "Remove .NET (~1GB/~1sec)" && sudo rm -rf /usr/share/dotnet
          #echo "Remove Android (~12GB/66sec)" && sudo rm -rf /usr/local/lib/android
          #echo "Remove CodeQL (~8GB/0sec)" && sudo rm -rf /opt/hostedtoolcache/CodeQL
          echo "Remove Docker images (~4GB/12sec)" && sudo docker image prune --all --force
          ls /tmp/sdlfjksdlkfj
          AFTER=$(df --output=used / | tail -n 1)
          echo "$[($BEFORE-$AFTER)/1000000]GB freed"
