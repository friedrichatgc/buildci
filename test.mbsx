<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
  <MBSimProject xmlns="http://www.mbsim-env.de/MBSimXML" name="Project">
  
    <DynamicSystemSolver xmlns="http://www.mbsim-env.de/MBSim" name="test">
      <plotFeatureRecursive value="openMBV">0</plotFeatureRecursive>
      <frames/>
      <contours/>
      <groups>
        <pv:Embed xmlns:pv="http://www.mbsim-env.de/MBXMLUtils" counterName="n" count="5">
          <Group name="g{n}">
            <frames>
              <FixedRelativeFrame name="FixedRelativeFrame">
                <enableOpenMBV/>
                <relativePosition unit="m">
                  <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                    <ele>0</ele>
                    <ele>-3</ele>
                    <ele>0</ele>
                  </xmlVector>
                </relativePosition>
              </FixedRelativeFrame>
            </frames><contours/>
            <groups/>
            <objects>
                <RigidBody name="RigidBody1">
                  <generalizedInitialPosition>[-2]</generalizedInitialPosition>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentTranslation>
                    <SymbolicFunction>
                      <definition arg1="q" arg1Dim="1">
                        % C-{steady}
                        ret=[q(1)
                             condition(-q(1)-1, abs((q(1)+1)**(1+1))-1, condition(-q(1)+1, -1, abs((q(1)-1)**(1+1))-1))
                             0]
                    </definition>
                    </SymbolicFunction>
                  </stateDependentTranslation>
                  <stateDependentRotation>
                    <SymbolicFunction>
                      <definition arg1="q" arg1Dim="1" xmlns="http://www.mbsim-env.de/MBSim">
                        % C-{steady}
                        ret=rotateAboutZ(condition(-q(1)-1, -abs(atan((1+1)*(q(1)+1)**1)), condition(-q(1)+1, 0, abs(atan((1+1)*(q(1)-1)**1)))))
                    </definition>
                    </SymbolicFunction></stateDependentRotation>
                  <translationDependentRotation>true</translationDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2" path="true">
                      <transparency unit="-">0.7</transparency>
                      <length unit="m">0.3</length>
                    </Cube>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC>
                    <size>2</size>
                    <offset>0</offset>
                  </enableOpenMBVFrameC>
                </RigidBody>
                <RigidBody name="RigidBody2">
                  <generalizedInitialPosition>[]</generalizedInitialPosition>
                  <mass unit="kg">0</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentTranslation>
                    <SymbolicFunction>
                      <definition arg1="q" arg1Dim="1">
                        % C-{steady}
                        ret=[q(1)
                             condition(-q(1)-1, abs((q(1)+1)**(1+1))-1, condition(-q(1)+1, -1, abs((q(1)-1)**(1+1))-1))
                             0]
                    </definition>
                    </SymbolicFunction>
                  </stateDependentTranslation>
                  <stateDependentRotation>
                    <SymbolicFunction>
                      <definition arg1="q" arg1Dim="1" xmlns="http://www.mbsim-env.de/MBSim">
                        % C-{steady}
                        ret=rotateAboutZ(condition(-q(1)-1, -abs(atan((1+1)*(q(1)+1)**1)), condition(-q(1)+1, 0, abs(atan((1+1)*(q(1)-1)**1)))))
                    </definition>
                    </SymbolicFunction></stateDependentRotation>
                  <translationDependentRotation>true</translationDependentRotation>
                  <frames/>
                  <contours/>
                  <openMBVRigidBody>
                    <Cube xmlns="http://www.mbsim-env.de/OpenMBV" name="Cube2" path="true">
                      <transparency unit="-">0.7</transparency>
                      <length unit="m">0.3</length>
                    </Cube>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC>
                    <size>2</size>
                    <offset>0</offset>
                  </enableOpenMBVFrameC>
                </RigidBody>
                <RigidBody name="Rod">
                  <frameOfReference ref="../Object[RigidBody1]/Frame[C]"/>
                  <frameForKinematics ref="Frame[F1]"/>
                  <mass unit="kg">3</mass>
                  <inertiaTensor unit="kg*m^2">
                    <xmlMatrix xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <row>
                        <ele>0.3</ele>
                        <ele>0</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0.3</ele>
                        <ele>0</ele>
                      </row>
                      <row>
                        <ele>0</ele>
                        <ele>0</ele>
                        <ele>0.3</ele>
                      </row>
                    </xmlMatrix>
                  </inertiaTensor>
                  <stateDependentRotation>
                    <RotationAboutAxesXYZ/>
                  </stateDependentRotation>
                  <frames>
                    <FixedRelativeFrame name="F1">
                      <enableOpenMBV>
                        <size unit="m">0.2</size>
                      </enableOpenMBV>
                      <relativePosition unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>-0.3</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </relativePosition>
                    </FixedRelativeFrame>
                    <FixedRelativeFrame name="F2">
                      <enableOpenMBV>
                        <size unit="m">0.2</size>
                      </enableOpenMBV>
                      <relativePosition unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.3</ele>
                          <ele>0</ele>
                          <ele>0</ele>
                        </xmlVector>
                      </relativePosition>
                    </FixedRelativeFrame>
                  </frames>
                  <contours/>
                  <openMBVRigidBody>
                    <Cuboid xmlns="http://www.mbsim-env.de/OpenMBV" name="Cuboid2">
                      <transparency unit="-">0.7</transparency>
                      <length unit="m">
                        <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                          <ele>0.6</ele>
                          <ele>0.1</ele>
                          <ele>0.1</ele>
                        </xmlVector>
                      </length>
                    </Cuboid>
                  </openMBVRigidBody>
                  <enableOpenMBVFrameC>
                    <size>2</size>
                    <offset>0</offset>
                  </enableOpenMBVFrameC></RigidBody>
            </objects><links>
            <!--        <SpringDamper name="SpringDamper" xmlns="http://www.mbsim-env.de/MBSim">
                  <plotFeature value="deflection">1</plotFeature>
                  <connect ref1="../Frame[FixedRelativeFrame]" ref2="../Object[RigidBody1]/Frame[C]"/>
                  <forceFunction>
                    <LinearSpringDamperForce>
                      <stiffnessCoefficient unit="N/m">10</stiffnessCoefficient>
                      <dampingCoefficient unit="N*s/m">0</dampingCoefficient>
                  </LinearSpringDamperForce>
                </forceFunction>
                  <unloadedLength unit="m">0</unloadedLength>
                  <enableOpenMBV>
                    <numberOfCoils>10</numberOfCoils>
                    <springRadius unit="m">0.1</springRadius>
                    <type>"polyline"</type>
                </enableOpenMBV>
            </SpringDamper>-->
            </links>
            <constraints>
                <JointConstraint name="Joint constraint">
                  <dependentRigidBodyOnFirstSide ref="../Object[Rod]"/>
                  <dependentRigidBodyOnSecondSide ref="../Object[RigidBody2]"/>
                  <independentRigidBody ref="../Object[RigidBody1]"/>
                  <connect ref1="../Object[Rod]/Frame[F2]" ref2="../Object[RigidBody2]/Frame[C]"/>
                  <forceDirection unit="-">
                    [1 0 0
                     0 1 0
                     0 0 1]
                  </forceDirection>
                  <momentDirection unit="-">
                    [1
                     0
                     0]
                  </momentDirection>
                  <initialGuess>
                    <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                      <ele>0</ele>
                    </xmlVector>
                  </initialGuess>
                </JointConstraint>
            </constraints><observers>
              <RigidBodyObserver name="RigidBody1Observer">
                <rigidBody ref="../Object[RigidBody1]"/>
                <enableOpenMBVJointForce/>
                <enableOpenMBVJointMoment/>
              </RigidBodyObserver>
              <RigidBodyObserver name="RigidBody2Observer">
                <rigidBody ref="../Object[RigidBody2]"/>
                <enableOpenMBVJointForce/>
                <enableOpenMBVJointMoment/>
              </RigidBodyObserver>
              <MechanicalConstraintObserver name="Mechanical constraint observer">
                <mechanicalConstraint ref="../Constraint[Joint constraint]"/>
                <enableOpenMBVForce/>
                <enableOpenMBVMoment/>
              </MechanicalConstraintObserver>
              <RigidBodyObserver name="RodObserver">
                <rigidBody ref="../Object[Rod]"/>
                <enableOpenMBVJointForce/>
                <enableOpenMBVJointMoment/>
              </RigidBodyObserver>
            </observers>
            <enableOpenMBVFrameI/>
          </Group>
        </pv:Embed>
      </groups>
      <objects/>
      <links/>
      <constraints/>
      <observers/>
      <environments>
        <MBSimEnvironment>
          <accelerationOfGravity unit="m/s^2">
            <xmlVector xmlns="http://www.mbsim-env.de/MBXMLUtils">
              <ele>0</ele>
              <ele>-9.81</ele>
              <ele>0</ele>
            </xmlVector>
          </accelerationOfGravity>
        </MBSimEnvironment>
      </environments>
      <inverseKinetics>true</inverseKinetics>
    </DynamicSystemSolver>
  
    <DOPRI5Integrator xmlns="http://www.mbsim-env.de/MBSim">
      <startTime unit="s">0</startTime>
      <endTime unit="s">50</endTime>
      <plotStepSize unit="s">1e-2</plotStepSize>
      <absoluteToleranceScalar>1e-10</absoluteToleranceScalar>
      <relativeToleranceScalar>1e-10</relativeToleranceScalar>
    </DOPRI5Integrator>
  
  
  
  </MBSimProject>
